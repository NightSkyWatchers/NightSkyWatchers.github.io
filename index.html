<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="记录生活的点点滴滴,待岁月逝去,回首往事,嘴角扬起久违的笑容">
<meta property="og:type" content="website">
<meta property="og:title" content="FourV Zhang&#39;Blog">
<meta property="og:url" content="http://fourvcat.cc/index.html">
<meta property="og:site_name" content="FourV Zhang&#39;Blog">
<meta property="og:description" content="记录生活的点点滴滴,待岁月逝去,回首往事,嘴角扬起久违的笑容">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FourV Zhang&#39;Blog">
<meta name="twitter:description" content="记录生活的点点滴滴,待岁月逝去,回首往事,嘴角扬起久违的笑容">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://fourvcat.cc/"/>





  <title>FourV Zhang'Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ce40cd9891fcac4e463a3e1823c63f2a";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">FourV Zhang'Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发随记,生活随笔,读书随感,旅游随心</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/06/07/APP上架被拒日常(6)-IPv6  网络错误/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/APP上架被拒日常(6)-IPv6  网络错误/" itemprop="url">APP上架被拒日常(6)-IPv6  网络错误</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-07T16:40:00+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/发布上架/" itemprop="url" rel="index">
                    <span itemprop="name">发布上架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/06/07/APP上架被拒日常(6)-IPv6  网络错误/" class="leancloud_visitors" data-flag-title="APP上架被拒日常(6)-IPv6  网络错误">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="原文"><a href="#原文" class="headerlink" title="原文"></a>原文</h4><p>We discovered one or more bugs in your app when reviewed on iPhone running iOS 11.1 on Wi-Fi connected to an IPv6 network.<br>Specifically, your app still displays a network error message and we are unable to log in.<br>Please see attached screenshots for details.<br>Next Steps<br>To resolve this issue, please run your app on a device to identify any issues, then revise and resubmit your app for review.<br>If we misunderstood the intended behavior of your app, please reply to this message in Resolution Center to provide information on how these features were intended to work.<br>For new apps, uninstall all previous versions of your app from a device, then install and follow the steps to reproduce the issue. For updates, install the new version as an update to the previous version, then follow the steps to reproduce the issue.<br>Resources<br>For information about testing your app and preparing it for review, please see Technical Note TN2431: App Testing Guide.<br>For a networking overview, please review About Networking. For a more specific overview of App Review’s IPv6 requirements, please review the IPv6 and App Review discussion on the Apple Developer Forum.</p>
<h4 id="译文"><a href="#译文" class="headerlink" title="译文:"></a>译文:</h4><p>当在连接到IPv6网络的Wi-Fi上运行ios11.1时，我们在应用程序中发现了一个或多个错误。<br>具体来说，您的应用程序仍然显示一个网络错误信息，我们无法登录。<br>详情请见附件截图。<br>下一个步骤<br>要解决这个问题，请在设备上运行您的应用程序来识别任何问题，然后修改并重新提交您的应用程序以供审查。<br>如果我们误解了您的应用程序的意图行为，请在Resolution Center中回复此消息，以提供这些特性如何工作的信息。<br>对于新的应用程序，从设备上卸载之前所有的应用程序，然后安装并执行复制问题的步骤。对于更新，将新版本作为以前版本的更新安装，然后按照以下步骤重新生成问题。<br>资源<br>有关测试您的应用程序并准备进行审查的信息，请参阅技术说明TN2431:应用程序测试指南。<br>要了解网络概况，请回顾网络。关于应用程序审查的IPv6需求的更具体的概述，请回顾一下关于苹果开发者论坛的IPv6和应用程序审查讨论。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p>针对被拒内容中提到了IPv6 网络环境下,网络错误导致无法登录!</p>
<ul>
<li>首先保证登录接口/截图中展示页面内网络接口能够正常使用,以防止在苹果审核期间宕机无法使用弹出网络错误的提示框;</li>
<li>其次<a href="https://www.jianshu.com/p/02584162b79a" target="_blank" rel="external">搭建IPv6 的网络环境</a>,并且录制使用APP的视频,上传到youtube上,并获取该视频的播放地址.</li>
<li>在重新打包提交的备注信息里或者问题中心的回复框里,附带上述视频地址以及相关解释说辞,提交审核即可.</li>
</ul>
<p>附上截图:<br><img src="https://upload-images.jianshu.io/upload_images/792843-9fab5baef95e48f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="photo.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/06/07/APP上架被拒日常(5)-Payments - In-App Purchase/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/APP上架被拒日常(5)-Payments - In-App Purchase/" itemprop="url">APP上架被拒日常(5)-Payments - In-App Purchase</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-07T16:20:00+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/发布上架/" itemprop="url" rel="index">
                    <span itemprop="name">发布上架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/06/07/APP上架被拒日常(5)-Payments - In-App Purchase/" class="leancloud_visitors" data-flag-title="APP上架被拒日常(5)-Payments - In-App Purchase">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="被拒-一-原文"><a href="#被拒-一-原文" class="headerlink" title="被拒(一)原文"></a>被拒(一)原文</h4><p>Hello,Thank you for providing the information. After further review, we found the following rejection:<br>We noticed that your app or its metadata enables the purchase of content, services, or functionality in the app by means other than the in-app purchase API, which is not appropriate for the App Store.<br>The next submission of this app may require a longer review time.<br>Next Steps</p>
<ul>
<li>Review the In-App Purchase section of the App Store Review Guidelines.</li>
<li>Ensure your app is compliant with all sections of the App Store Review Guidelines and the Terms &amp; Conditions of the Apple Developer Program.</li>
<li>Once your app is fully compliant, resubmit your app for review.<br>Submitting apps designed to mislead or harm customers or evade the review process may result in the termination of your Apple Developer Program account. Review the Terms &amp; Conditions of the Apple Developer Program to learn more about our policies regarding termination.<br>If you believe your app is compliant with the App Store Review Guidelines, you may submit an appeal. Alternatively, you may provide additional details about your app by replying directly to this message.</li>
</ul>
<h4 id="译文"><a href="#译文" class="headerlink" title="译文:"></a>译文:</h4><p>您好，谢谢您提供的信息。经过进一步的审查，我们发现了以下的拒绝:<br>我们注意到，你的app或它的元数据可以通过APP内购买API以外的方式购买APP中的内容、服务或功能，这并不适合APP Store。<br>这款应用的下一个提交可能需要更长的审查时间。<br>下一个步骤<br>-检查App Store内购买部分评审指南。<br>-确保您的应用程序符合app Store评审指南的所有章节以及苹果开发者计划的条款和条件。<br>-一旦你的应用完全兼容，重新提交你的应用进行审查。<br>提交旨在误导、伤害客户或逃避审查过程的应用程序，可能会导致您的Apple Developer程序帐户被终止。查看Apple Developer Program的条款和条件，了解更多关于终止的政策。<br>如果你认为你的应用程序符合app Store评审准则，你可以提出上诉。或者，您可以通过直接回复此消息来提供关于您的应用程序的其他详细信息。</p>
<h4 id="解决方案￼"><a href="#解决方案￼" class="headerlink" title="解决方案￼"></a>解决方案￼</h4><p>一. 审核期间显示会员卡，让苹果审核员使用内购买的方式 购买会员，而不是使用内购以外的 方式购买,在此基础上还有以下两种处理方式选择<br>1)被拒内容中已经发出警告：逃避审核规则，可能导致开发者帐号封禁；根据提示此次把第三方支付模块注释掉提交上线,审核通过后，再次打开第三方支付模块，以修复bug的名义上线<br>面临问题： 导致首个版本短时间内无法使用第三方支付(微信,支付宝等)</p>
<p>2)保留第三方支付模块,添加一个实体商品(类似淘宝),使用微信支付方式;需要设计一个新的UI商品界面<br>问题:时间成本比较高,业务逻辑繁琐</p>
<p>推荐方案1),我们是使用方案1)解决的问题.</p>
<p>二. 审核期间隐藏会员卡信息,审核通过后显示会员卡信息,并且不需要添加内购支付的逻辑,保留第三方支付模块代码.</p>
<p>面临问题:苹果审核可能会检测到第三方支付的相关库,譬如微信的sdk,支付宝的sdk.导致开发者帐号封禁</p>
<p>附上截图:<br><img src="https://upload-images.jianshu.io/upload_images/792843-d512e9da7f59c935.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图.png"></p>
<h4 id="被拒-二-原文"><a href="#被拒-二-原文" class="headerlink" title="被拒(二)原文"></a>被拒(二)原文</h4><p>We noticed that your app is using consumable in-app purchase products as intermediary currency for the exchange of items that function as non-renewing subscriptions.<br>Next Steps<br>To resolve this issue, please delete your consumable in-app purchase products, then create separate non-renewing subscription in-app purchase products for each item that the user would have exchanged those consumable products for. This product type matches the usage model for the products you are ultimately selling to your users.<br>Note: The product type cannot be changed once an in-app purchase product has been created. Therefore, you will need to create a new in-app purchase product with the correct product type.<br>To create new in-app purchases:</p>
<ul>
<li>Log in to iTunes Connect</li>
<li>Click on “My Apps”</li>
<li>Select your app</li>
<li>Click on “Features” to create new in-app purchases</li>
<li>Click Save</li>
<li>Once you’ve completed all changes, click the “Submit for Review” button at the top of the App Version Information page.<br>Resources<br>More information on in-app purchase product types is available in the In-App Purchase Programming Guide.</li>
</ul>
<h4 id="译文-1"><a href="#译文-1" class="headerlink" title="译文:"></a>译文:</h4><p>我们注意到，您的应用程序正在使用可消费的内购产品作为交换项目的中介货币，这些项目的功能是不可更新的订阅。<br>下一个步骤<br>为了解决这个问题，请删除您的可消费应用内购买产品，然后为用户将这些可消费产品交换的每个项目创建单独的不可更新的应用内购买产品。该产品类型与您最终销售给用户的产品的使用模型相匹配。<br>注意:在创建内购产品之后，不能更改产品类型。因此，您需要创建一个具有正确产品类型的应用程序内购买产品。<br>创建新的应用内购买:<br>-登录iTunes Connect。<br>-点击“我的应用”<br>—选择你的应用<br>-点击“功能”来创建新的内购。<br>—点击保存<br>-完成所有更改后，点击App版本信息页面顶部的“提交审核”按钮。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><p><em>根据提示解决就可以,删除掉appstore类型不正确(消费类型)的内购产品,然后重新创建正确类型(非续期订阅)的内购产品即可.</em></p>
<p><img src="https://upload-images.jianshu.io/upload_images/792843-9b0833b9e54f7d61.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图1.png"><br><img src="https://upload-images.jianshu.io/upload_images/792843-4134c90d9aaa52c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图2.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/06/07/APP上架被拒日常(4)- 私有API - Software Requirements/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/APP上架被拒日常(4)- 私有API - Software Requirements/" itemprop="url">APP上架被拒日常(4)- 私有API - Software Requirements</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-07T15:50:00+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/发布上架/" itemprop="url" rel="index">
                    <span itemprop="name">发布上架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/06/07/APP上架被拒日常(4)- 私有API - Software Requirements/" class="leancloud_visitors" data-flag-title="APP上架被拒日常(4)- 私有API - Software Requirements">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="原文"><a href="#原文" class="headerlink" title="原文:"></a>原文:</h4><p>Your app uses the “prefs:root=” non-public URL scheme, which is a private entity. The use of non-public APIs is not permitted on the App Store because it can lead to a poor user experience should these APIs change<br>Continuing to use or conceal non-public APIs in future submissions of this app may result in the termination of your Apple Developer account, as well as removal of all associated apps from the App Store<br>Next Steps<br>To resolve this issue, please revise your app to provide the associated functionality using public APIs or remove the functionality using the “prefs:root” or “App-Prefs:root” URL scheme.<br>If there are no alternatives for providing the functionality your app requires, you can file an enhancement request.</p>
<h4 id="译文"><a href="#译文" class="headerlink" title="译文:"></a>译文:</h4><p>您的应用程序使用“prefs:root=”非公开URL组合，这是一个私有API。应用商店不允许使用非公有api，因为如果这些api发生变化，会导致糟糕的用户体验<br>继续使用或隐藏私有API，在以后提交这个应用程序时，可能会导致你的苹果开发者账户被终止，并从应用商店中删除所有相关的应用<br>下一个步骤<br>要解决这个问题，请修改应用程序，使用公共api提供相关功能，或者删除使用“prefs:root”或“app - prefs:root”私有API相关功能。<br>如果没有提供应用程序所需功能的替代方案，您可以提交增强请求。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h4><p>1)全局搜索项目中”prefs:root”关键词字眼,并将搜索到的结果分情况删除或者注释掉或者寻找替代方法;此外如果不放心私有API问题,可以查找项目中是否存在其他私有API,如有删除掉即可.<br>此方法推荐!!!<br>2)如果通过方法1)解决了私有API的问题,但是应用内相关功能却无法实现了,就给苹果提交请求,增加新的公有API!不过此方法漫长不一定能解决问题</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/06/07/APP上架被拒日常(3)- 误判为企业应用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/APP上架被拒日常(3)- 误判为企业应用/" itemprop="url">APP上架被拒日常(3)- 误判为企业应用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-07T15:41:00+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/发布上架/" itemprop="url" rel="index">
                    <span itemprop="name">发布上架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/06/07/APP上架被拒日常(3)- 误判为企业应用/" class="leancloud_visitors" data-flag-title="APP上架被拒日常(3)- 误判为企业应用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="原文"><a href="#原文" class="headerlink" title="原文:"></a>原文:</h4><p>We found that your app is an in-house app, intended for employees or members of your organization. As such, it is not appropriate for the App Store.<br>For information on distributing proprietary, in-house apps, please refer to the Apple Developer Enterprise Program.</p>
<h4 id="译文"><a href="#译文" class="headerlink" title="译文:"></a>译文:</h4><p>我们发现您的APP是一个公司内部APP,用于员工或您的组织成员。因此，它并不适合应用程序商店。<br>有关分配专有的信息,企业内部应用程序,请参阅苹果开发者计划</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h4><p><em>上一次APP被拒,回复的相关内容有些片面,导致苹果审核员认为应用是一个企业应用,不适合上架到应用商店,只需要解释清楚APP是提供给哪些人群使用,不仅仅是针对公司员工,还有除员工以外的大众用户群体,则可以解决此问题</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/06/07/APP上架被拒日常(2)- Data Collection and Storage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/07/APP上架被拒日常(2)- Data Collection and Storage/" itemprop="url">APP上架被拒日常(2)- Data Collection and Storage</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-07T14:41:00+08:00">
                2018-06-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/发布上架/" itemprop="url" rel="index">
                    <span itemprop="name">发布上架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/06/07/APP上架被拒日常(2)- Data Collection and Storage/" class="leancloud_visitors" data-flag-title="APP上架被拒日常(2)- Data Collection and Storage">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="原文"><a href="#原文" class="headerlink" title="原文:"></a>原文:</h4><p>Guideline 5.1.1 - Legal - Privacy - Data Collection and StorageWe noticed that your app requires users to register with personal information to access non account-based features. Apps cannot require user registration prior to allowing access to app content and features that are not associated specifically to the user.Please see attached screenshots for details<br>Next Steps<br>User registration that requires the sharing of personal information must be optional or tied to account-specific functionality. Additionally, the requested information must be relevant to the features.<br>Request a phone call from App Review<br>At your request, we can arrange for an Apple Representative to call you within the next three to five business days to discuss your App Review issue</p>
<h4 id="译文"><a href="#译文" class="headerlink" title="译文:"></a>译文:</h4><p>准则5.1.1 -法律-隐私保护-数据收集和存储<br>我们注意到你的应用程序需要用户通过提交个人信息注册帐号来访问一些不基于帐户之上的功能特性。应用程序不能在允许访问与用户没有特定关联的应用程序内容和特性之前要求用户注册。详情请见附件截图<br>接着下一步<br>需要共享个人信息的用户注册必须是可选的，或者绑定到特定于帐户的功能。此外，所请求的信息必须与特性相关。<br>请求App Review的电话<br>根据您的要求，我们可以安排一位苹果代表在接下来的3到5个工作日内给您打电话，讨论您的应用程序审核问题。</p>
<h4 id="复现步骤"><a href="#复现步骤" class="headerlink" title="复现步骤:"></a>复现步骤:</h4><p>游客状态,点击观看”被拒截图1”中的视频,因为涉及到视频用户授权需要用户信息,所以会弹登录注册页面</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h4><p>1)在游客状态下,隐藏这些需要用户信息的相关内容,此方法比较推荐!!!<br>2)如果隐藏实现比较繁琐的话,可以在苹果审核期间,程序内部默认一个用户cookie,从而使得游客状态访问相关信息不需要用户登录;审核通过后,使用真实帐号的cookie. 这个方法实现过程中需要注意不能改动现有其他功能的逻辑以及审核状态之间的转换,比较繁琐麻烦<br>3)请求与app review电话联系,等待在未来3–5工作日内与审核人员电话沟通解释—-游客状态下,访问相关内容为何需要登录注册.如果不登录注册会出现什么问题.磨破嘴皮子说服审核员,考验沟通技术,看运气</p>
<p>附上截图:<br><img src="https://upload-images.jianshu.io/upload_images/792843-e10aa187018c442b.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="被拒截图1.jpeg"><br><img src="https://upload-images.jianshu.io/upload_images/792843-5c50e4dee13c5edb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="被拒截图2.jpg"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/06/06/APP上架被拒日常(1)- Information Needed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/06/APP上架被拒日常(1)- Information Needed/" itemprop="url">APP上架被拒日常(1)- Information Needed</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-06T14:41:00+08:00">
                2018-06-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/发布上架/" itemprop="url" rel="index">
                    <span itemprop="name">发布上架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/06/06/APP上架被拒日常(1)- Information Needed/" class="leancloud_visitors" data-flag-title="APP上架被拒日常(1)- Information Needed">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="原文"><a href="#原文" class="headerlink" title="原文:"></a>原文:</h4><p>Guideline 2.1 - Information Needed<br>We have started the review of your app, but we are not able to continue because we need additional information about your app.<br>Next StepsTo help us proceed with the review of your app, please review the following questions and provide as much detailed information as you can.</p>
<ul>
<li>Does your app access any paid content or services?</li>
<li>What are the paid content or services, and what are the costs?</li>
<li>Do individual customers pay for the content or services?</li>
<li>If no, does a company or organization pay for the content or services? - Where do they pay, and what’s the payment method?</li>
<li>If users create an account to use your app, are there fees involved?</li>
<li>How do users obtain an account?Once you reply to this message in Resolution Center with the requested information, we can proceed with your review.</li>
</ul>
<h4 id="译文"><a href="#译文" class="headerlink" title="译文:"></a>译文:</h4><p>准则2.1 -所需的信息<br>我们已经开始评估你的应用程序,但我们不能继续,因为我们需要更多的信息关于你的应用。<br>下一步<br>来帮助我们进行应用程序的审查,请检查以下问题,并提供尽可能多的详细信息<br>应用程序访问付费内容或服务吗?<br>付费内容或服务是什么?费用是什么?<br>个人客户支付内容或服务?<br>如果没有，公司或组织是否为内容或服务付费?<br>他们支付,支付方式是什么?<br>如果用户使用你的应用程序创建一个帐户,有涉及费用?<br>用户如何取得帐户?一旦你回复这个消息在解决中心所请求的信息,我们可以开始你的审查。</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案:"></a>解决方案:</h4><p><strong>此一般出现在APP首次上线或者APP时隔一段时间提交一个大的更新版本时,按照译文所描述的,在问题中心的回复框里回复相关问题即可.不过也需要谨慎回复!!!</strong></p>
<ul>
<li>如果APP中涉及到付费内容/付费服务,并且使用了苹果的内购(iap)支付,或者APP干脆没有相关的付费内容/付费服务,则可以如实回答;</li>
<li>如果APP中含有付费内容/付费服务,但是不想使用内购(iap)支付给苹果分成,从而使用支付宝/微信/网银等第三方支付,则此处就需要编造一个善意的谎言,否定APP中的相关付费信息.</li>
</ul>
<p><em>回复例句:</em><br><strong>Our Application without access to any paid digital content and services, so will not involve the issue of pay for content. Our  Application Have registered entrance application, the user can get an APP account function through registration</strong><br><strong>应用没有访问任何付费的数字内容或服务,所以更不会涉及到为内容付费的问题.应用有注册入口,用户可以通过注册功能获得一个APP账户</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/03/26/No accounts with itunes connect access have been found for the team "xxxx"/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/26/No accounts with itunes connect access have been found for the team "xxxx"/" itemprop="url">No accounts with itunes connect access have been found for the team "xxxx"</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-26T14:41:00+08:00">
                2018-03-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/发布上架/" itemprop="url" rel="index">
                    <span itemprop="name">发布上架</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          
             <span id="/2018/03/26/No accounts with itunes connect access have been found for the team "xxxx"/" class="leancloud_visitors" data-flag-title="No accounts with itunes connect access have been found for the team "xxxx"">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>距离这一次打包发版很近的两三天前，xcode内配置文件和证书都正确无误，打包过程还很顺利！<br>这次打包出现如下图的问题</p>
<p><img src="https://upload-images.jianshu.io/upload_images/792843-947a72437dcb8dbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="no account.png"><br>在网上查找了好多相关问题的解决方法，都没能解决我遇到的问题；隔天在stackoverflow社区里，查找到了几个解决问题的方法，其中一个对我起到了很大的作用！<br><a href="https://stackoverflow.com/questions/46009471/xcode-9-no-itunes-connect-account-error-when-uploading" target="_blank" rel="external">Xcode 9 “no iTunes Connect account” error when uploading</a></p>
<p>####解决方案1<br>采用<strong>little</strong>的解决方法<br><img src="https://upload-images.jianshu.io/upload_images/792843-bdbef0bdd5554e84.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="little.jpeg"></p>
<ol>
<li>关闭xcode</li>
<li>终端执行命令<code>rm -fr ~/Library/Developer/Xcode/DerivedData/</code></li>
<li>重新打开Xcode，再次打包上传</li>
</ol>
<p>####解决方案2<br>采用<strong>Jayprakash Dubey</strong>的解决方法<br><img src="https://upload-images.jianshu.io/upload_images/792843-e0c1c4e4afcbefab.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="dubey.jpeg"></p>
<p>1.打包生成IPA应用包<br>2.使用Application Loader 上传IPA文件！</p>
<p>不过才用上述两个方法的前提就是 确保Xcode里配置的描述文件和证书没有过期/失效，可以按照<a href="http://blog.csdn.net/wzw_2015/article/details/53032092" target="_blank" rel="external">博客</a>中的方法去检查。点击首张图左下角的 <strong>Manage Accounts</strong>去添加设置帐号信息。</p>
<p><strong>1.</strong> 你点add，删掉你的账号，再添加一次上去，重启Xcode再来一遍试试<br><strong>2.</strong> 检查你的证书、描述文件在开发者中心有没有过期，在Xcode有没有配置好<br><strong>3.</strong> 如果你此时要做的是提交App上架审核的操作，请你打开Xcode，按 command+逗号 检查你账号的身份，member，admin，还是agent，只有agent才有权限提交上架</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/03/13/浅析collectionView的item间距/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/13/浅析collectionView的item间距/" itemprop="url">浅析collectionView的item间距</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-13T13:23:43+08:00">
                2018-03-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/研发随笔/" itemprop="url" rel="index">
                    <span itemprop="name">研发随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/03/13/浅析collectionView的item间距/" class="leancloud_visitors" data-flag-title="浅析collectionView的item间距">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ios开发中比较常用到的就是 tableView 和 collectionView，二者分别用于<strong>列表展示</strong>和 <strong>网格展示</strong>；由于tableView的易用性几乎每个APP都会用到; 相对tableView，collectionView使用起来比较繁琐，所以collectionView的使用不常见。但UICollectionView也有自身的特点，比如<strong>横向布局、多行或者多列(瀑布流)</strong>展示。</p>
<h5 id="一、创建collectionView（collectionView控制器）"><a href="#一、创建collectionView（collectionView控制器）" class="headerlink" title="一、创建collectionView（collectionView控制器）"></a>一、创建collectionView（collectionView控制器）</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(collectionView)</div><div class="line">- (instancetype)initWithFrame:(CGRect)frame collectionViewLayout:(UICollectionViewLayout *)layout</div><div class="line"></div><div class="line">(collectionView控制器)</div><div class="line">- (instancetype)initWithCollectionViewLayout:(UICollectionViewLayout *)layout ;</div></pre></td></tr></table></figure>
<p>初始化类似tableView，设置delegate 和 datasource；<br>不同于tablView初始化设置UITableViewStyle，而collctionView初始化设置UICollectionViewLayout（一般用它的子类UICollectionViewFlowLayout）。<br>此处的UICollectionViewLayout是用于存储collectionView的一些布局属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic) CGFloat minimumLineSpacing;</div><div class="line">@property (nonatomic) CGFloat minimumInteritemSpacing;</div><div class="line">@property (nonatomic) CGSize itemSize;</div><div class="line">@property (nonatomic) UICollectionViewScrollDirection scrollDirection;</div><div class="line">@property (nonatomic) UIEdgeInsets sectionInset;</div></pre></td></tr></table></figure></p>
<p>cell间距的设置需要用到以上这些关键性属性。</p>
<h5 id="二、布局协议"><a href="#二、布局协议" class="headerlink" title="二、布局协议"></a>二、布局协议</h5><blockquote>
<p>UICollectionViewDelegateFlowLayout</p>
</blockquote>
<p><strong>协议中有以下这几个和布局相关的方法</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath;</div><div class="line">- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section;</div><div class="line">- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout minimumLineSpacingForSectionAtIndex:(NSInteger)section;</div><div class="line">- (CGFloat)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout minimumInteritemSpacingForSectionAtIndex:(NSInteger)section;</div><div class="line">- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section;</div><div class="line">- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForFooterInSection:(NSInteger)section;</div></pre></td></tr></table></figure></p>
<p>这几个方法的功能和UICollectionViewLayout的4个属性基本相对应：<br><strong>1.属性用于统一设置<br>2.对象方法既可以统一设置，也可以区别设置</strong></p>
<p>这几个方法名的区别在后半部分<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xxxxx sizeForItemAtIndexPath:(NSIndexPath *)indexPath</div></pre></td></tr></table></figure></p>
<p>等同于属性 itemSize；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xxxxx insetForSectionAtIndex:(NSInteger)section</div></pre></td></tr></table></figure></p>
<p>等同于属性 sectionInset；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xxxxx minimumLineSpacingForSectionAtIndex:(NSInteger)section</div></pre></td></tr></table></figure></p>
<p>等同于属性 minimumLineSpacing；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xxxxx minimumInteritemSpacingForSectionAtIndex:(NSInteger)section</div></pre></td></tr></table></figure></p>
<p>等同于属性 minimumInteritemSpacing；</p>
<h5 id="三、图文解析对应属性（针对不同滚动方向）"><a href="#三、图文解析对应属性（针对不同滚动方向）" class="headerlink" title="三、图文解析对应属性（针对不同滚动方向）"></a>三、图文解析对应属性（针对不同滚动方向）</h5><p><img src="https://upload-images.jianshu.io/upload_images/792843-e38f8f37093b9047.gif?imageMogr2/auto-orient/strip" alt="collectionView布局.gif"><br>gif中每个不同颜色代表不同的section</p>
<p><img src="https://upload-images.jianshu.io/upload_images/792843-337ac4d11d9e3a6d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="水平方向滚动.png"></p>
<p>水平方向滚动的collectionView，竖直方向的间距是固定的：minimumInteritemSpacing指的是同一个section 内部item的竖直方向间隙；<br>minimumLineSpacing指的是同一个section 内部 item的水平方向间隙；</p>
<p><img src="https://upload-images.jianshu.io/upload_images/792843-b867e973012d97b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="竖直方向滚动.png"></p>
<p>竖直方向滚动的collectionView，水平方向的间距是固定的：minimumInteritemSpacing指的是同一个section 内部item的水平方向间隙；<br>minimumLineSpacing指的是同一个section 内部 item的竖直方向间隙；</p>
<h6 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h6><p>minimumInteritemSpacing表示 同一个section内部间item的 和滚动方向垂直方向的间距；</p>
<p>minimumLineSpacing指的是同一个section 内部 item 的滚动方向的间距；<br>sectionInset指的是每个section内缩进；属性设置的每个section的内错进是相同的，都是正数。如果需要实现不同的setion的不同的内缩进，可以使用对象方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section;</div></pre></td></tr></table></figure></p>
<p>来实现。</p>
<h6 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h6><p>在写demo的过程中，发现collectionView的<strong>contentInsetAdjustmentBehavior</strong>（等同于控制器的automaticallyAdjustsScrollViewInsets属性）默认为UIScrollViewContentInsetAdjustmentAutomatic枚举值，会自适应控制器的边距，避开导航栏和状态栏，而使得collectionView的真实高度 和设置的高度不一致（相差状态栏和导航栏的高度和）。</p>
<p><strong>demo地址</strong>：<a href="https://github.com/NightSkyWatchers/collectionView，欢迎下载观摩指正，内有*彩蛋*" target="_blank" rel="external">https://github.com/NightSkyWatchers/collectionView，欢迎下载观摩指正，内有*彩蛋*</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/03/01/软件生命周期&&测试的工作流程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/01/软件生命周期&&测试的工作流程/" itemprop="url">软件生命周期&&测试的工作流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-01T16:45:00+08:00">
                2018-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术拓展/" itemprop="url" rel="index">
                    <span itemprop="name">技术拓展</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          
             <span id="/2018/03/01/软件生命周期&&测试的工作流程/" class="leancloud_visitors" data-flag-title="软件生命周期&&测试的工作流程">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="软件的生命周期"><a href="#软件的生命周期" class="headerlink" title="软件的生命周期"></a>软件的生命周期</h3><h5 id="1-问题定义及规划"><a href="#1-问题定义及规划" class="headerlink" title="1.问题定义及规划"></a>1.问题定义及规划</h5><p><em>解决用户的痛点，方便用户<br>软件开发目的以及可行性，制定开发计划。。。</em></p>
<h5 id="2-需求分析"><a href="#2-需求分析" class="headerlink" title="2.需求分析"></a>2.需求分析</h5><h5 id="3-软件设计"><a href="#3-软件设计" class="headerlink" title="3.软件设计"></a>3.软件设计</h5><h5 id="4-软件编码"><a href="#4-软件编码" class="headerlink" title="4.软件编码"></a>4.软件编码</h5><p><em>开发人员进行程序编码</em></p>
<h5 id="5-软件测试"><a href="#5-软件测试" class="headerlink" title="5.软件测试"></a>5.软件测试</h5><p><em>开发做，单元测试<br>开发or测试做， 集成测试<br>开发做， 系统测试<br>测试做，验收测试</em></p>
<h5 id="6-软件维护"><a href="#6-软件维护" class="headerlink" title="6.软件维护"></a>6.软件维护</h5><p><em>版本上线，产品上线，版本的升级改造，修复bug</em></p>
<h3 id="软件测试的工作流程"><a href="#软件测试的工作流程" class="headerlink" title="软件测试的工作流程"></a>软件测试的工作流程</h3><p>接触到哪些岗位人员———-开发人员、产品经理、客服（收集用户反馈）、实施／技术支持／现场实施（驻场）、设计师<br><img src="http://upload-images.jianshu.io/upload_images/792843-8803570369b9419d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="软件测试工作流程.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://fourvcat.cc/2018/03/01/系统学习---软件测试的分类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FourV Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FourV Zhang'Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/01/系统学习---软件测试的分类/" itemprop="url">系统学习---软件测试的分类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-01T16:22:00+08:00">
                2018-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术拓展/" itemprop="url" rel="index">
                    <span itemprop="name">技术拓展</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          
             <span id="/2018/03/01/系统学习---软件测试的分类/" class="leancloud_visitors" data-flag-title="系统学习---软件测试的分类">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-按照测试阶段"><a href="#1-按照测试阶段" class="headerlink" title="1.按照测试阶段"></a>1.按照测试阶段</h4><p>单元测试，集成测试，系统测试，验收测试（正式验收测试，Alpha测试，Beta测试）</p>
<p><em>集成测试——-开发与开发之间的联调，接口测试<br>系统测试——整体全部功能的测试，不是模块的测试<br>Alpha测试—–前期用户测试，内部人员模拟实际环境进行验收测试（内测）<br>Beta测试——后期用户测试，通过内部测试，即将正式发布。 在一个或多个真实环境下发布版本进行公测。（预发步版本，公测，预测）</em></p>
<h4 id="2-按照测试技术分类"><a href="#2-按照测试技术分类" class="headerlink" title="2.按照测试技术分类"></a>2.按照测试技术分类</h4><p>白盒测试，黑盒测试，灰盒测试</p>
<p><em>白盒测试———- 知道程序内部代码逻辑，代码拿过来，输入测试数据就知道是否ok<br>黑盒测试———-不知道xxxxxxxxxxxx，通过表面的反应才知道是否ok<br>灰盒测试———-介于二者之间，既有xx，也有xx</em></p>
<h4 id="3-按照被测试对象是否运行分类"><a href="#3-按照被测试对象是否运行分类" class="headerlink" title="3.按照被测试对象是否运行分类"></a>3.按照被测试对象是否运行分类</h4><p>动态测试，静态测试（文档检查，代码走查，界面检查）</p>
<h4 id="4-不同测试手段"><a href="#4-不同测试手段" class="headerlink" title="4.不同测试手段"></a>4.不同测试手段</h4><p>手工测试，自动化测试</p>
<h4 id="5-按测试包含的内容划分"><a href="#5-按测试包含的内容划分" class="headerlink" title="5.按测试包含的内容划分"></a>5.按测试包含的内容划分</h4><p>功能测试，界面测试，安全测试，兼容性测试，易用性测试，性能测试，压力测试，负载测试，恢复测试（灾备）</p>
<p><em>恢复测试—-主要检查系统的容错能力。采用各种办法强迫系统失败，然后验证系统能否在指定的时间间隔内尽快恢复并重新启动系统</em><br><em>易用性测试—-测试软件是否易用，主观性比较强</em></p>
<h4 id="6-其他测试"><a href="#6-其他测试" class="headerlink" title="6.其他测试"></a>6.其他测试</h4><p>冒烟测试，回归测试，探索性测试（测试思维）</p>
<p>详解：<br><em>冒烟测试——在真正测试开始之前，都会对应用版本 主干功能做一下测试，如果主干功能都测试不通过，就可以打回这个版本；</em></p>
<p><em>回归测试——-指之前提出的bug被修正后／软件功能发生变化后进行的重新测试，确认修改部分已经ok，并且不会对其他功能造成影响！<br>1.验证bug是否被修复<br>2.和该bug相关功能是否被影响</em></p>
<p>###软件测试是什么<br>定义：为了发现程序中的错误而执行程序的过程</p>
<p><em>1.为了发现程序存在的代码或业务逻辑错误<br>2.为了检验产品是否符合用户需求<br>3.为了提高用户的体验</em></p>
<h4 id="软件测试的原则"><a href="#软件测试的原则" class="headerlink" title="软件测试的原则"></a>软件测试的原则</h4><p><em>1.测试应该尽早介入<br>2.所有测试追溯到用户需求<br>3.程序员英国避免检查自己的程序，除了单元测试，交给第三方／专业测试<br>4.设计测试用例时，应该考虑合法的输入和不合法的输入以及各种边界条件，意外状态<br>5.二八原则，测试发现的错误中80%很可能起源于20%的模块中（聚集效应，bug比较集中）<br>6.对错误结果要进行一个确认过程（必现，偶现；复现！！！）<br>7.制定严格的测试计划<br>8.完全测试是不可能的，测试需要终止（测试不是无休止的，没有明显bug测试就可以终止）<br>9.妥善保存测试过程中的所有文档</em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="FourV Zhang" />
          <p class="site-author-name" itemprop="name">FourV Zhang</p>
           
              <p class="site-description motion-element" itemprop="description">记录生活的点点滴滴,待岁月逝去,回首往事,嘴角扬起久违的笑容</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">27</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FourV Zhang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  
    

    
  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("6f2zKsw7cD3JdhRjGi9Gpof9-gzGzoHsz", "z7o6eQQPKaPp8WLIMX0bwMDj");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
